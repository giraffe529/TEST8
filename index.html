<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ランダム・タイル写真ギャラリー（音写真対応）</title>

  <!-- CSS -->
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header>
    <div class="wrap toolbar">
      <h1>photo with sound</h1>

      <div class="spacer"></div>

      
      </div>
    </div>
  </header>

  <main class="wrap">
    <p style="color:var(--muted); margin:0 0 12px"></p>

    <div id="gallery" class="masonry" aria-live="polite"></div>
  </main>

  <footer>
    <small>© 2025 Random Tiled Gallery</small>
  </footer>

  <!-- JS -->
  <script src="./gallery.js"></script>
  <script>
    (function () {
      const DURATION = 400; // CSSの .4s と合わせる
    
      // グローバル関数：JSから使える
      window.navigateWithFade = function (url) {
        document.body.classList.add("fade-out");
        setTimeout(function () {
          window.location.href = url;
        }, DURATION);
      };
    
      function enablePageFade() {
        // ロード時フェードイン
        requestAnimationFrame(function () {
          document.body.classList.add("page-loaded");
        });
    
        // aタグクリック → フェードアウトしてから遷移
        document.querySelectorAll("a[href]").forEach(function (a) {
          const href = a.getAttribute("href");
          if (!href || href.startsWith("#") || a.target === "_blank") return;
    
          a.addEventListener("click", function (e) {
            e.preventDefault();
            navigateWithFade(href);
          });
        });
      }
    
      document.addEventListener("DOMContentLoaded", enablePageFade);
    })();
    </script>
    
</body>
</html>
